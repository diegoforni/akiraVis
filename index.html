<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="style.css">
    <title>Visualizer</title>
</head>
<body>
    <div class="box">
        <div class="visualizer"></div>
    </div>

    <script>
        const visualizer = document.querySelector('.visualizer');
        const bufferLength = 64;
        let elements = [];
        let intervalId = null; // Variable to hold interval ID

        // Function to reset the scale of all elements to 0
        const resetScale = () => {
            for (let i = 0; i < bufferLength; i++) {
                elements[i].style.transform = `rotate(${(360 / bufferLength) * i}deg) scaleY(0)`;
            }
        };

        // Function to stop the animation
        const stopAnimation = () => {
            resetScale();
            clearInterval(intervalId);
        };

        // Function to resume the animation
        const resumeAnimation = () => {
            intervalId = setInterval(update, 500);
        };

        for (let i = 0; i < bufferLength; i++) {
            const element = document.createElement('span');
            element.classList.add('element');
            element.style.transform = `rotate(${(360 / bufferLength) * i}deg)`;
            elements.push(element);
            visualizer.appendChild(element);
        }

        const update = () => {
            for (let i = 0; i < bufferLength; i++) {
                const scale = Math.random() * 2.5; 
                elements[i].style.transform = `rotate(${(360 / bufferLength) * i}deg) scaleY(${scale})`;
            }
        };

        // Start the animation initially
        resumeAnimation();

        // Function to loop the animation
        const loopAnimation = () => {
            stopAnimation();
            setTimeout(resumeAnimation, 5000);
        };

        // Call loopAnimation every 10 seconds
        setInterval(loopAnimation, 10000);
    </script>
</body>
</html>
